(function() {
	var localProtocol = window.location.protocol,
		localIsHybrid = !/^(http:|https:)/gi.test(localProtocol),
		defaultSOAProtocol = "https:",
		soaProtocol = localIsHybrid ? defaultSOAProtocol : localProtocol,
		defaultImgProtocol = "https:";
	var globalLonAndLat = {};

	function Common() {}
	Common.IsArray = function(t) {
		if(t == null || t == undefined) {
			return false
		}
		return typeof t == "object" && t.length >= 0
	};
	Common.isInApp = function(t) {
		var e = t == undefined ? window.navigator.userAgent.toLowerCase() : t;
		if(e.match(/ctripWireless/i) == "ctripwireless" || !!/_ctripVBKwireless_ios/i.test(e) || !!/ctripVBKwireless_android/i.test(e)) {
			return true
		} else {
			return false
		}
	};
	Common.IsFunction = function(t) {
		return typeof t == "function"
	};
	Common.IsObject = function(t) {
		if(t == null || t == undefined) {
			return false
		}
		return typeof t == "object" && Object.prototype.toString.call(t).toLowerCase() == "[object object]" && !t.length
	};
	Common.IsEmptyObject = function(t) {
		if(t === null || t === undefined) {
			return true
		}
		if(typeof t == "object" && t.length > 0) {
			return false
		}
		if(typeof t == "object") {
			var e = false;
			for(var i in t) {
				e = true;
				break
			}
			return !e
		}
		return false
	};
	Common.StringTrim = function(t) {
		return t === undefined || t === null ? "" : t.replace(/(^\s*)|(\s*$)/g, "").replace(/(^　*)|(　*$)/g, "")
	};
	Common.StringFormat = function(t, e) {
		if(Common.StringIsNullOrEmpty(t)) {
			return ""
		}
		if(Common.IsArray(e)) {
			for(var i = 0; i < e.length; i++) {
				e[i] = Common.StringIsNullOrEmpty(e[i]) ? "" : e[i].toString();
				t = t.replace(new RegExp("\\{" + i.toString() + "\\}", "g"), e[i])
			}
		}
		return t
	};
	Common.StringIsNullOrEmpty = function(t) {
		return t === null || t === undefined || Common.StringTrim(t.toString()) == ""
	};
	Common.CreateGuid = function() {
		function t() {
			return((1 + Math.random()) * 65536 | 0).toString(16).substring(4)
		}

		function e() {
			var e = "";
			for(var i = 1; i <= 20; i++) {
				e += t();
				if(i === 8 || i === 12 || i === 16 || i === 20) {
					e += "-"
				}
			}
			var n = parseInt(8 * Math.random());
			var a = (new Date).getTime() + "";
			e += a.slice(0, n);
			for(var o = 0; o < 4; o++) {
				e += t()
			}
			e += a.slice(n + 5, 13);
			return e
		}
		return e()
	};
	Common.JsonToObject = function(jsonString) {
		if(Common.StringIsNullOrEmpty(jsonString) || typeof jsonString != "string") {
			return null
		}
		jsonString = Common.StringTrim(jsonString);
		try {
			return eval("(" + jsonString + ")")
		} catch(ex) {}
		return null
	};
	Common.JsonToString = function(t) {
		if(t === null || t === undefined || Common.IsFunction(t)) {
			return ""
		}
		return e("", t);

		function e(t, i) {
			var n = "";
			if(i == null) {
				n = "null"
			} else if(typeof i == "number") {
				n = i.toString()
			} else if(typeof i == "boolean") {
				n = i.toString().toLowerCase()
			} else if(Common.IsArray(i)) {
				var a = [];
				for(var o = 0; o < i.length; o++) {
					a.push(e("", i[o]))
				}
				n = "[" + a.join(",") + "]"
			} else if(Common.IsObject(i)) {
				var a = [];
				for(var r in i) {
					if(!Common.IsFunction(i[r])) {
						a.push(e(r, i[r]))
					}
				}
				n = "{" + a.join(",") + "}"
			} else {
				n = '"' + i.toString().replace(/\\/g, "\\\\").replace(/"/g, '\\"') + '"'
			}
			return Common.StringIsNullOrEmpty(t) ? n : Common.StringFormat('"{0}":{1}', [t, n])
		}
	};
	Common.Clone = function(t) {
		if(Common.IsEmptyObject(t)) {
			return t
		}
		if(Common.IsArray(t)) {
			var e = [];
			for(var i = 0; i < t.length; i++) {
				e.push(Common.Clone(t[i]))
			}
			return e
		} else if(Common.IsObject(t)) {
			var n = {};
			for(var a in t) {
				if(Common.IsArray(t[a]) || Common.IsObject(t[a])) {
					n[a] = Common.Clone(t[a])
				} else {
					n[a] = t[a]
				}
			}
			return n
		}
		return t
	};
	Common.GetCookie = function(t) {
		var e = null;
		if(document.cookie && document.cookie != "") {
			var i = document.cookie.split(";");
			for(var n = 0; n < i.length; n++) {
				var a = Common.StringTrim(i[n]);
				if(a.substring(0, t.length + 1) == t + "=") {
					e = decodeURIComponent(a.substring(t.length + 1));
					break
				}
			}
		}
		return e
	};
	Common.ArrayWhereToList = function(t, e) {
		var i = [];
		for(var n = 0; n < t.length; n++) {
			if(e(t[n], n)) {
				i.push(t[n])
			}
		}
		return i
	};
	Common.ArrayForeach = function(t, e) {
		for(var i = 0; i < t.length; i++) {
			if(e(t[i], i) === false) {
				break
			}
		}
	};
	Common.SetStorage = function(t, e, i) {
		try {
			i = i || 0;
			localStorage.setItem(t, e);
			if(i > 0) {
				t += "_Time";
				var n = ((new Date).getTime() + i * 60 * 1e3).toString() + "_" + i.toString();
				localStorage.setItem(t, n)
			}
		} catch(a) {}
	};
	Common.GetStorage = function(t) {
		var e = "";
		try {
			e = localStorage.getItem(t);
			var i = t + "_Time";
			var n = localStorage.getItem(i);
			if(!Common.StringIsNullOrEmpty(n)) {
				var a = n.split("_");
				var o = parseFloat(a[0]);
				var r = parseFloat(a[1]);
				if(o > 0) {
					var s = (new Date).getTime();
					if(s > o) {
						e = "";
						localStorage.removeItem(t);
						localStorage.removeItem(i)
					} else {
						o = ((new Date).getTime() + r * 60 * 1e3).toString() + "_" + r.toString();
						localStorage.setItem(i, o)
					}
				}
			}
		} catch(l) {}
		return Common.StringIsNullOrEmpty(e) ? "" : e
	};
	Common.LoadCss = function(t, e) {
		var i = document.createElement("style");
		i.type = "text/css";
		i.id = t;
		if(typeof i.styleSheet != "undefined") {
			i.styleSheet.cssText = e
		} else {
			i.innerHTML = e
		}
		document.getElementsByTagName("head")[0].appendChild(i)
	};
	Common.LoadJS = function(t, e, i) {
		var n = document.head || document.getElementsByTagName("head")[0];
		var a = document.createElement("script");
		a.type = "text/javascript";
		a.charset = "utf-8";
		a.async = true;
		a.onload = function() {
			e && e()
		};
		a.onerror = function() {
			i && i();
			n.removeChild(a)
		};
		a.src = t;
		n.appendChild(a)
	};
	Common.LoadLink = function(t) {
		var e = document.createElement("link");
		e.type = "text/css";
		e.rel = "stylesheet";
		e.href = t;
		document.getElementsByTagName("head")[0].appendChild(e)
	};
	Common.GetPageQueryString = function(t) {
		var e = {};
		t = t || location.search.substring(1);
		var i = t.split("&");
		for(var n = 0; n < i.length; n++) {
			var a = i[n].indexOf("=");
			if(a == -1) continue;
			var o = i[n].substring(0, a);
			var r = i[n].substring(a + 1);
			e[o] = unescape(r)
		}
		return e
	};
	Common.ReplaceHttp = function(t) {
		if(Common.StringIsNullOrEmpty(t)) {
			return t
		}
		var e = Common.StringTrim(t);
		if(localIsHybrid) {
			if(/^[\/]{2}/.test(e)) {
				e = defaultImgProtocol + e
			}
		} else {
			e = e.replace(/^(http:|https:)/gi, "")
		}
		return e
	};
	Common.AddUrlRandom = function(t) {
		if(Common.StringIsNullOrEmpty(t)) {
			return
		}
		t += t.indexOf("?") > 0 ? "&" : "?";
		t += Common.StringFormat("_r{0}={1}", [Common.GetRandomChars(), Math.random()]);
		return t
	};
	Common.GetRandomChars = function(t) {
		t = t || 10;
		var e = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz";
		var i = [];
		for(var n = 0; n < t; n++) {
			i.push(e.charAt(Math.floor(Math.random() * e.length)))
		}
		return i.join("")
	};
	Common.ClearAdCache = function() {
		var t = "";
		var e = /^(bidadcount|dyadindex|siteid|sitetype)\d+_\d+_/i;
		var i = /^(addatalist_\d+_\d+_)_time/i;
		if(!!!window.localStorage) {
			return
		}
		for(var n in window.localStorage) {
			var a = false;
			if(e.test(n)) {
				localStorage.removeItem(n)
			}
			if(i.test(n)) {
				t = localStorage.getItem(n).split("_");
				if(t.length != 2) {
					return
				}
				if(t[1] < (new Date).getTime()) {
					localStorage.removeItem(n);
					a = true
				}
				if(!!i.exec(n) && i.exec(n).length == 2 && a) {
					localStorage.removeItem(i.exec(n)[1])
				}
			}
		}
	};

	function DataAccess() {}
	DataAccess.Request = function(t) {
		if(Common.IsEmptyObject(t)) {
			return
		}
		t.Method = t.Method == undefined ? "GET" : t.Method;
		if(Common.StringIsNullOrEmpty(t.Url)) {
			return
		}
		t.Async = t.Async == undefined ? true : t.Async;
		t.Headers = t.Headers == undefined ? {} : t.Headers;
		t.DataType = t.DataType == undefined ? "json" : t.DataType;
		t.ContentType = t.ContentType == undefined ? "application/x-www-form-urlencoded" : t.ContentType;
		t.Data = t.Data == undefined ? "" : t.Data;
		var e = null;
		e = n();
		if(e == null) {
			return
		}
		e.open(t.Method, a(t.Url), t.Async, t.User, t.Password);
		e.setRequestHeader("Accept", t.DataType);
		e.setRequestHeader("Content-Type", t.ContentType);
		for(var i in t.Headers) {
			e.setRequestHeader(i, t.Headers[i])
		}
		e.onreadystatechange = function() {
			if(e.readyState == 4) {
				if(e.status == 200) {
					if(t.SuccessCallback != undefined && typeof t.SuccessCallback == "function") {
						var i;
						if(t.DataType == "json") {
							i = Common.JsonToObject(e.responseText)
						} else if(t.DataType == "xml") {
							i = e.responseXML
						} else {
							i = e.responseText
						}
						t.SuccessCallback(i, e)
					}
				} else {
					if(t.ErrorCallback != undefined && typeof t.ErrorCallback == "function") {
						t.ErrorCallback(e)
					} else {
						if(Common.StringIsNullOrEmpty(e.responseText)) {
							alert(e.status + ":" + e.statusText)
						} else {
							alert(e.responseText)
						}
					}
				}
			}
		};
		e.send(t.Data);

		function n() {
			try {
				if(window.XMLHttpRequest) {
					return new XMLHttpRequest
				} else if(window.ActiveXObject) {
					return new ActiveXObject("Microsoft.XMLHTTP")
				}
			} catch(t) {}
			return null
		}

		function a(t) {
			if(t.indexOf("?") > 0) {
				t += "&_rm=" + Math.random()
			} else {
				t += "?_rm=" + Math.random()
			}
			return encodeURI(t)
		}
		return e
	};
	DataAccess.PostRequest = function(t, e, i, n, a) {
		var o = {};
		o.Url = t;
		o.Method = "POST";
		o.Async = a;
		o.ContentType = "application/json; charset=utf-8";
		o.Data = Common.JsonToString(e);
		o.SuccessCallback = function(t, e) {
			o.IsCallback = true;
			i && i(t, e)
		};
		o.ErrorCallback = function(t) {
			o.IsCallback = true;
			n && n(t)
		};
		var r = DataAccess.Request(o);
		window.setTimeout(function() {
			if(!o.IsCallback) {
				o.IsCallback = false;
				r.abort();
				r.XmlHttp2 = DataAccess.Request(o)
			}
		}, 3e3);
		return r
	};

	function HtmlTag() {}
	HtmlTag.GetById = function(t) {
		return document.getElementById(t)
	};
	HtmlTag.SetHtml = function(t, e) {
		if(t != null && e !== undefined) {
			t.innerHTML = e
		}
	};
	HtmlTag.AppendHtml = function(t, e) {
		var i = document.createElement("div");
		HtmlTag.SetHtml(i, e);
		while(i.childNodes.length > 0) {
			t.appendChild(i.childNodes[0])
		}
	};
	HtmlTag.GetElementsByTagName = function(t, e) {
		return t != null && t.getElementsByTagName(e)
	};
	HtmlTag.SetHide = function(t) {
		if(t != null && t.style != undefined) {
			t.style.display = "none"
		}
	};
	HtmlTag.SetShow = function(t) {
		if(t != null && t.style != undefined) {
			t.style.display = ""
		}
	};
	HtmlTag.GetScreenWidth = function() {
		return window.innerWidth * (window.devicePixelRatio || 1)
	};
	HtmlTag.GetScreenHeight = function() {
		return window.innerHeight * (window.devicePixelRatio || 1)
	};
	HtmlTag.GetBodyWidth = function() {
		return document.body.offsetWidth
	};
	HtmlTag.GetBodyHeight = function() {
		return document.body.offsetHeight
	};
	HtmlTag.GetWidth = function(t) {
		if(t != null && t.style != undefined) {
			if(t.style.width == "") {
				if(t.parentNode != null) {
					return HtmlTag.GetWidth(t.parentNode)
				} else {
					return HtmlTag.GetBodyWidth()
				}
			} else if(t.style.width.indexOf("%") > 0) {
				var e = HtmlTag.GetWidth(t.parentNode);
				var i = parseFloat(t.style.width);
				return e * i / 100
			} else {
				return parseFloat(t.style.width)
			}
		}
		return t.body != undefined ? HtmlTag.GetBodyWidth() : 0
	};
	HtmlTag.SetWidth = function(t, e) {
		if(t != null && t.style != undefined) {
			var i = parseFloat(e);
			if(!isNaN(i)) {
				t.style.width = i.toString() + "px"
			}
		}
	};
	HtmlTag.GetHeight = function(t) {
		if(t != null && t.style != undefined) {
			if(t.style.height == "") {
				if(t.parentNode != null) {
					return HtmlTag.GetHeight(t.parentNode)
				} else {
					return HtmlTag.GetBodyHeight()
				}
			} else if(t.style.width.indexOf("%") > 0) {
				var e = HtmlTag.GetHeight(t.parentNode);
				var i = parseFloat(t.style.height);
				return e * i / 100
			} else {
				return parseFloat(t.style.height)
			}
		}
		return t.body != undefined ? HtmlTag.GetBodyHeight() : 0
	};
	HtmlTag.SetHeight = function(t, e) {
		if(t != null && t.style != undefined) {
			var i = parseFloat(e);
			if(!isNaN(i)) {
				t.style.height = i.toString() + "px"
			}
		}
	};
	HtmlTag.SetStyle = function(t, e) {
		if(t != null && t.style != undefined) {
			if(Common.IsObject(e)) {
				for(var i in e) {
					t.style[i] = e[i]
				}
			}
		}
	};
	HtmlTag.SetStyleValue = function(t, e, i) {
		if(t != null && t.style != undefined) {
			t.style[e] = i
		}
	};
	HtmlTag.RemoveClass = function(t, e) {
		if(t != null && t.className != undefined) {
			t.className = Common.StringTrim(t.className.replace(e, "").replace("  ", ""))
		}
	};
	HtmlTag.AddClass = function(t, e) {
		if(t != null && t.className != undefined) {
			e = Common.StringTrim(t.className) + " " + e;
			t.className = Common.StringTrim(e)
		}
	};
	HtmlTag.BindEvent = function(t, e, i) {
		HtmlTag.RemoveEvent(t, e, i);
		HtmlTag.AddEvent(t, e, i)
	};
	HtmlTag.AddEvent = function(t, e, i) {
		if(t.attachEvent) {
			t.attachEvent("on" + e, i)
		} else if(t.addEventListener) {
			t.addEventListener(e, i, false)
		} else {
			t["on" + e] = i
		}
	};
	HtmlTag.RemoveEvent = function(t, e, i) {
		if(t.attachEvent) {
			t.detachEvent("on" + e, i)
		} else if(t.addEventListener) {
			t.removeEventListener(e, i, false)
		} else {
			t["on" + e] = null
		}
	};
	HtmlTag.RemoveElement = function(t) {
		if(typeof t == "string") {
			t = HtmlTag.GetById(t)
		}
		t && t.parentNode && t.parentNode.removeChild(t)
	};

	function OutInterface() {}
	OutInterface.IsHybrid = function() {
		return false
	};
	OutInterface.GetClientId = function() {
		var t = OutInterface.GetHead();
		return Common.StringIsNullOrEmpty(t.cid) ? "" : t.cid
	};
	OutInterface.GetVId = function() {
		var t = Common.GetCookie("_bfa");
		if(t != null) {
			var e = t.toString().split(".");
			if(e.length > 2) {
				return e[1] + "." + e[2]
			}
		}
		return ""
	};
	OutInterface.GetCity = function(t, e) {
		var i = (new Date).getTime();
		if(OutInterface.SelectCityId != undefined) {
			n(OutInterface.SelectCityId, -1, true);
			return
		}
		OutInterface.SelectCityId = Common.GetStorage("SelectCityId");
		if(!OutInterface.SelectCityId || OutInterface.SelectCityId < 0) {
			OutInterface.SelectCityId = 2
		}
		if(!Common.StringIsNullOrEmpty(OutInterface.SelectCityId)) {
			n(OutInterface.SelectCityId, -1, true);
			OutInterface.GetLongLatItude();
			return
		}
		OutInterface.GetLongLatItude();

		function n(n, a, o) {
			OutInterface.SelectCityId = n;
			o && t && t.call(e, n, i, a)
		}
	};
	OutInterface.GetLongLatItude = function(t) {
		if(window.navigator && window.navigator.geolocation && globalLonAndLat.IsEnable == true) {
			window.navigator.geolocation.getCurrentPosition(function(e) {
				if(e != null && e.coords != undefined) {
					Common.SetStorage("SelectCityLongitude", e.coords.longitude);
					Common.SetStorage("SelectCityLatitude", e.coords.latitude);
					OutInterface.GetCityByLngLat(e.coords.longitude, e.coords.latitude, t)
				}
			}, function() {
				t && t.call(this)
			}, {
				enableHighAccuracy: true,
				maximumAge: 5e3,
				timeout: 2e4
			})
		} else {
			if(!!globalLonAndLat.CityID && !!globalLonAndLat.Lon && !!globalLonAndLat.Lat) {
				Common.SetStorage("SelectCityLongitude", globalLonAndLat.Lon);
				Common.SetStorage("SelectCityLatitude", globalLonAndLat.Lat);
				Common.SetStorage("SelectCityId", globalLonAndLat.CityID)
			}
			t && t.call(this)
		}
	};
	OutInterface.GetCityByLngLat = function(t, e, i) {
		var n = this;
		var a = {};
		a.Lng = t;
		a.Lat = e;
		a.Channel = "Market";
		var o = OutInterface.GetRootUrl().replace("10245", "10011") + "GetCurrentCityByLatlng";
		DataAccess.PostRequest(o, a, function(t) {
			if(t != null && t.CityId != undefined && t.CityId > 0) {
				Common.SetStorage("SelectCityId", t.CityId);
				i && i.call(n)
			} else {
				i && i.call(n)
			}
		}, function() {
			i && i.call(n)
		})
	};
	OutInterface.GetHead = function() {
		var t = {};
		var e = Common.GetStorage("HEADSTORE");
		if(!Common.StringIsNullOrEmpty(e)) {
			t = Common.JsonToObject(e).value
		} else {
			t = {
				cid: "",
				ctok: "",
				cver: "1.0",
				lang: "01",
				sid: "8888",
				syscode: "09",
				auth: null
			}
		}
		if(!t.auth || t.auth == "") {
			t.auth = Common.GetCookie("cticket")
		}
		if(!t.auth || t.auth == "") {
			t.auth = null
		}
		return t
	};
	OutInterface.GetCINFO = function() {
		var t = null;
		var e = Common.GetStorage("CINFO");
		if(!Common.StringIsNullOrEmpty(e)) {
			t = Common.JsonToObject(e)
		}
		return t
	};
	OutInterface.GetAdWidthHeight = function() {
		return null
	};
	OutInterface.GetEnvName = function() {
		var t = window.location.host;
		if(t.match(/localhost|fws|fat/i)) {
			return "fat"
		} else if(t.match(/uat/i)) {
			return "uat"
		}
		return "prd"
	};
	OutInterface.GetRootUrl = function() {
		var t = "",
			e, i = OutInterface.GetEnvName(),
			n = soaProtocol,
			a = n === "http:";
		if(i == "fat") {
			t = "gateway.m.fws.qa.nt.ctripcorp.com";
			n = "http:"
		} else if(i == "uat") {
			t = "gateway.m.uat.qa.nt.ctripcorp.com"
		} else {
			if(a) {
				t = "m.ctrip.com"
			} else {
				t = "sec-m.ctrip.com"
			}
		}
		e = [n, "//", t, "/restapi/soa2/10245/json/"].join("");
		OutInterface.Env = i;
		return e
	};
	OutInterface.JumpUrl = function(t) {
		window.location.href = t
	};
	OutInterface.SetUBTTrackLog = function(t, e) {
		window.__bfi = window.__bfi || [];
		var i = t == 2 ? "AdPV" : t == 3 ? "AdClick" : t == 1 ? "sumadpv" : t == 4 ? "100323" : t == 5 ? "100323" : "";
		i != "" && window.__bfi.push(["_tracklog", i, e])
	};
	OutInterface.TrackMetric = function(t, e, i, n, a, o) {
		var r = (new Date).getTime() - t;
		if(Common.StringIsNullOrEmpty(e)) {
			return
		}
		a = a || "";
		o = o || "";
		var s = {
			name: "adsdkelapsedtime",
			value: r,
			sample: 10,
			tag: {
				PageId: e,
				InterfaceType: i,
				Status: n,
				SiteType: o,
				SiteID: a
			}
		};
		window.__bfi = window.__bfi || [];
		window.__bfi.push(["_trackMetric", s])
	};

	function SliderControl(t) {
		this.Slider = t;
		this.Id = Common.CreateGuid();
		this.DataList = [];
		this.ItemChange = function(t) {};
		this.ItemClick = function(t) {};
		this.Width = 0;
		this.Height = 0;
		this.IsSlider = false;
		this.TagObject = null;
		this.FirstItem = {};
		this.LastItem = {};
		this.SelectData = null;
		this.FirstImgShow = function(t) {};
		this.DyAdImgLoad = function(t) {};
		this.FullDataList = [];
		this.Load = function(t, n) {
			this.IsHybrid = OutInterface.IsHybrid();
			if(t.length > 0) {
				this.DataList = t;
				this.FullDataList = n;
				Common.ArrayForeach(this.DataList, function(t, e) {
					t.Id = Common.CreateGuid();
					t.IsLoad = false;
					t.IsShow = false;
					t.Index2 = e
				});
				this.TagObject = HtmlTag.GetById(this.Slider.TagId);
				d.call(this);
				HtmlTag.SetHtml(this.TagObject, e.call(this));
				S.call(this);
				i.call(this)
			} else {
				!this.Slider.IsBackupLoadComplete && this.Slider.AdLoadComplete(this, 1)
			}
		};
		this.ReLoad = function() {
			this.Destroy();
			this.IsSlider = false;
			this.Load(this.DataList, this.FullDataList)
		};
		this.Play = function() {
			var t = this;
			this.Stop();
			if(this.IsSlider) {
				this.TimeoutId = window.setInterval(function() {
					h.call(t, 500)
				}, 3e3)
			}
		};
		this.Stop = function() {
			if(this.TimeoutId != null) {
				window.clearInterval(this.TimeoutId);
				this.TimeoutId = null
			}
		};
		this.LoadImage = function(e) {
			var i = this;
			if(!Common.StringIsNullOrEmpty(e.SrcUrl)) {
				var n = new Image;
				n.src = e.SrcUrl;
				if(!e.IsRequest) {
					e.LoadImgStartT = (new Date).getTime()
				}
				n.onload = function() {
					e.IsLoad = true;
					if(!e.IsRequest) {
						e.LoadImgEndT = (new Date).getTime()
					}
					e.IsRequest = true;
					var t = HtmlTag.GetById(e.Id);
					if(!!!t) {
						return
					}
					if(i.ImgHeight - i.Height > 1) {
						l.call(i, t)
					} else {
						t.appendChild(this)
					}
					if(e.IsDy && !Common.StringIsNullOrEmpty(e.Style)) {
						HtmlTag.GetById("dyadStyle") == null && Common.LoadCss("dyadStyle", e.Style)
					}
					if(e.IsDy && !Common.StringIsNullOrEmpty(e.Content)) {
						HtmlTag.AppendHtml(t, e.Content)
					}
					e.TagObject = t;
					a(e);
					i.Slider.SetLoadTiming()
				};
				n.onerror = function() {
					if(!e.IsRequest) {
						e.LoadImgEndT = (new Date).getTime()
					}
					e.IsRequest = true;
					i.Slider.SetLoadTiming();
					o.call(i)
				}
			} else {
				if(!e.IsRequest) {
					e.LoadImgEndT = (new Date).getTime()
				}
				e.IsRequest = true;
				i.Slider.SetLoadTiming();
				o.call(i)
			}

			function a(t) {
				var e = true;
				if(t.BeforeImage) {
					if(!t.BeforeImage.IsRequest) {
						e = false
					} else if(t.BeforeImage.IsLoad && !t.BeforeImage.IsShow) {
						e = false
					}
				}
				if(e && t.IsLoad) {
					t.IsShow = true;
					g.call(i);
					r.call(i);
					if(!i.Slider.IsLoadComplete) {
						!Common.StringIsNullOrEmpty(i.Slider.BackupImageId) && HtmlTag.RemoveElement(i.Slider.BackupImageId);
						i.Slider.IsLoadComplete = true;
						f.call(i, t);
						HtmlTag.SetShow(i.TagObject);
						!i.Slider.IsBackupLoadComplete && i.Slider.AdLoadComplete(i.Slider, 0)
					} else {
						f.call(i)
					}
					HtmlTag.SetShow(t.TagObject);
					HtmlTag.SetShow(HtmlTag.GetById("nav_" + t.Id));
					if(!i.Slider.FirstImgShowT && t.Index2 == 0) {
						i.Slider.FirstImgShowT = (new Date).getTime();
						i.FirstImgShow(t)
					}
					if(!i.Slider.DyImgLoadT && t.IsDy) {
						i.Slider.DyImgLoadT = (new Date).getTime();
						i.DyAdImgLoad(t)
					}
				}
				if(e && t.AfterImage && t.AfterImage.IsRequest) {
					a(t.AfterImage)
				}
			}

			function o() {
				e.IsLoad = false;
				e.IsRequest = true;
				a(e);
				this.AdLoadErrorCount += 1;
				if(this.DataList.length == this.AdLoadErrorCount) {
					!this.Slider.IsBackupLoadComplete && this.Slider.AdLoadComplete(t, 1)
				}
			}

			function r() {
				var t = Common.ArrayWhereToList(this.DataList, function(t) {
					return t.IsLoad
				});
				if(t.length > 1) {
					var e = null;
					e = t[t.length - 1];
					var i = HtmlTag.GetById(this.FirstItem.Id);
					HtmlTag.SetHtml(i, s.call(this, e));
					HtmlTag.SetShow(i);
					e = t[0];
					i = HtmlTag.GetById(this.LastItem.Id);
					HtmlTag.SetHtml(i, s.call(this, e));
					HtmlTag.SetShow(i);
					if(!this.FirstItem.IsLoad) {
						this.FirstItem.IsLoad = true;
						this.LastItem.IsLoad = true;
						f.call(this)
					}
				}
			}

			function s(t) {
				var e = [];
				if(this.ImgHeight - this.Height > 1) {
					e.push(Common.StringFormat('<img src="{0}" style="width:{1}px;height:{2}px;position:absolute;bottom:0px; overflow:hidden;"/>', [t.SrcUrl, this.Width, this.ImgHeight]))
				} else {
					e.push(Common.StringFormat('<img src="{0}"/>', [t.SrcUrl]))
				}
				if(t.IsDy && !Common.StringIsNullOrEmpty(t.Content)) {
					e.push(t.Content)
				}
				return e.join("")
			}

			function l(t) {
				var i = [];
				i.push(Common.StringFormat('<img src="{0}" style="width:{1}px;height:{2}px;position:absolute;bottom:0px; overflow:hidden;"/>', [e.SrcUrl, this.Width, this.ImgHeight]));
				HtmlTag.AppendHtml(t, i.join(""))
			}
		};
		this.Destroy = function() {
			var t = this;
			this.Stop();
			HtmlTag.SetHtml(this.TagObject, "");
			HtmlTag.RemoveEvent(window, "resize", function() {
				d.call(t, true)
			})
		};

		function e() {
			var t = this;
			var e = this.Width * (this.DataList.length + 2);
			var i = [];
			i.push(Common.StringFormat('<div class="cm-slide cm-slide--full-img" id="{0}" style="height:{1}px;">', [this.Id, this.Height]));
			i.push(Common.StringFormat('<ul class="cm-slide-list js_scroller" id="ul_{0}" style="position: absolute;width:{1}px;">', [this.Id, e]));
			this.FirstItem.Id = Common.CreateGuid();
			this.FirstItem.IsLoad = false;
			i.push(n.call(this, this.FirstItem));
			Common.ArrayForeach(this.DataList, function(e) {
				i.push(n.call(t, e))
			});
			this.LastItem.Id = Common.CreateGuid();
			this.LastItem.IsLoad = false;
			i.push(n.call(this, this.LastItem));
			i.push("</ul>");
			if(this.DataList.length > 1 && this.Slider.IsNav) {
				i.push(Common.StringFormat('<div class="cui-navContainer" id="nav_{0}" style="color: rgb(20, 145, 197);display:none;z-index:10;position: absolute;">', [this.Id]));
				Common.ArrayForeach(this.DataList, function(e) {
					i.push(a.call(t, e))
				});
				i.push("</div>")
			}
			i.push("</div>");
			return i.join("");

			function n(t) {
				var e = [];
				e.push(Common.StringFormat('<li class="cm-slide-item" id="{0}" style="width:{1}px;height:{2}px;font-size:{2}px;display:none;"></li>', [t.Id, this.Width, this.Height]));
				return e.join("")
			}

			function a(t) {
				var e = [];
				e.push(Common.StringFormat('<span class="cui-slide-nav-item" id="nav_{0}" style="display:none;"></span>', [t.Id]));
				return e.join("")
			}
		}

		function i() {
			var t = this;
			HtmlTag.BindEvent(window, "resize", function() {
				d.call(t, true)
			});
			if(this.Slider.IsNav) {
				var e = HtmlTag.GetElementsByTagName(HtmlTag.GetById("nav_" + this.Id), "span");
				if(Common.IsArray(e)) {
					Common.ArrayForeach(e, function(e) {
						e.onclick = function() {
							var e = this.id.replace("nav_", "");
							f.call(t, l.call(t, e))
						}
					})
				}
			}
			var i = HtmlTag.GetElementsByTagName(HtmlTag.GetById(this.Id), "li");
			if(Common.IsArray(i)) {
				Common.ArrayForeach(i, function(e) {
					e.onclick = function() {
						t.ItemClick(l.call(t, this.id))
					}
				})
			}
			var a = function(e) {
				n.call(t, e)
			};
			var o = function(e) {
				r.call(t, e)
			};
			var m = function(e) {
				s.call(t, e)
			};
			var c = function() {
				t.Stop()
			};
			var h = function() {
				t.Play()
			};
			var u = HtmlTag.GetById(this.Id);
			HtmlTag.BindEvent(u, "touchstart", a);
			!this.IsHybrid && HtmlTag.BindEvent(u, "touchend", m);
			HtmlTag.BindEvent(window, "touchend", o);
			HtmlTag.BindEvent(window, "touchcancel", o);
			HtmlTag.BindEvent(u, "mouseover", c);
			HtmlTag.BindEvent(u, "mouseout", h)
		}

		function n(t) {
			this.Stop();
			!this.IsHybrid && t.preventDefault && t.preventDefault();
			this.IsTouchStart = true;
			this.SelectTarget = t.target;
			var e = t.touches ? t.touches[0] : t;
			this.StartX = e.pageX;
			this.StartY = e.pageY;
			o.call(this)
		}

		function a(t) {
			if(this.IsTouchStart && this.SelectTarget.parentNode.id == t.target.parentNode.id) {
				t.preventDefault && t.preventDefault();
				this.IsTouchMove = true;
				var e = t.touches ? t.touches[0] : t;
				var i = e.pageX - this.StartX;
				var n = e.pageY - this.StartY;
				if(i == 0 && n == 0) {
					this.IsTouchMove = false
				}
				if(this.IsHybrid && e.pageY + 5 >= this.Height) {
					r.call(this, t)
				} else if(this.IsHybrid && e.pageY - 5 <= 0) {
					r.call(this, t)
				} else if(Math.abs(i) > Math.abs(n)) {
					var a = this.SelectData.Left + i;
					u.call(this, a)
				}
			}
		}

		function o(t) {
			var e = this;
			var i = function(t) {
				a.call(e, t)
			};
			var n = HtmlTag.GetById(this.Id);
			if(t) {
				HtmlTag.RemoveEvent(n, "touchmove", i)
			} else {
				HtmlTag.BindEvent(n, "touchmove", i)
			}
		}

		function r(t) {
			if(this.IsTouchMove && this.IsTouchStart) {
				var e = t.changedTouches ? t.changedTouches[0] : t;
				var i = e.pageX - this.StartX;
				if(i > 40) {
					c.call(this, 200)
				} else if(i <= -40) {
					h.call(this, 200)
				} else {
					u.call(this, this.SelectData.Left, 50)
				}
			}
			if(this.IsTouchStart) {
				o.call(this, true);
				if(this.IsTouchClicked) {
					this.ItemClick(this.SelectData)
				} else {
					this.Play()
				}
			}
			this.IsTouchStart = false;
			this.IsTouchMove = false;
			this.IsTouchClicked = false
		}

		function s(t) {
			if(this.IsTouchStart && !this.IsTouchMove && this.SelectTarget.parentNode.id == t.target.parentNode.id) {
				this.IsTouchClicked = true
			}
		}

		function l(t) {
			var e = null;
			Common.ArrayForeach(this.DataList, function(i) {
				if(i.Id == t) {
					e = i;
					return false
				}
			});
			return e
		}

		function d(t) {
			var e = this;
			var i = 0,
				n = 0;
			Common.ArrayForeach(this.DataList, function(t) {
				if(t.Width > 0 && t.Height > 0) {
					i = t.Width;
					n = t.Height;
					return false
				}
			});
			var a = OutInterface.GetAdWidthHeight();
			if(a != null) {
				this.Width = a.Width;
				this.Height = a.Height;
				if(i > 0 && n > 0) {
					this.ImgHeight = parseFloat(n * this.Width / i)
				}
				m.call(this, i, n, true);
				HtmlTag.SetHeight(this.TagObject, this.Height)
			} else {
				if(i > 0 && n > 0) {
					this.Width = this.TagObject.clientWidth ? this.TagObject.clientWidth : HtmlTag.GetBodyWidth();
					m.call(this, i, n);
					HtmlTag.SetHeight(this.TagObject, this.Height);
					if(t) {
						var o = null;
						o = HtmlTag.GetById(this.Id);
						HtmlTag.SetHeight(o, this.Height);
						o = HtmlTag.GetById("ul_" + this.Id);
						HtmlTag.SetWidth(o, this.Width * (this.DataList.length + 2));
						Common.ArrayForeach(this.DataList, function(t) {
							o = HtmlTag.GetById(t.Id);
							HtmlTag.SetWidth(o, e.Width);
							HtmlTag.SetHeight(o, e.Height);
							HtmlTag.SetStyleValue(o, "fontSize", e.Height + "px")
						});
						o = HtmlTag.GetById(this.FirstItem.Id);
						HtmlTag.SetWidth(o, this.Width);
						HtmlTag.SetHeight(o, this.Height);
						o = HtmlTag.GetById(this.LastItem.Id);
						HtmlTag.SetWidth(o, this.Width);
						HtmlTag.SetHeight(o, this.Height);
						g.call(this);
						f.call(this)
					}
				}
			}
		}

		function m(t, e, i) {
			if(!i) {
				this.Height = parseInt(e * this.Width / t)
			}
			if(!Common.StringIsNullOrEmpty(this.Slider.Theme)) {
				if(this.Slider.Theme.toLowerCase() == "hotel") {
					if(this.ImgHeight > 0) {
						this.Height = this.ImgHeight * 2
					} else {
						this.Height = this.Height * 2
					}
				}
			}
		}

		function c(t) {
			var e = this;
			var i = null,
				n;
			for(var a = this.DataList.length - 1; a >= 0; a--) {
				n = this.DataList[a];
				if(n.IsShow && e.SelectData != null && n.Index2 < e.SelectData.Index2) {
					i = n;
					break
				}
			}
			var o = false;
			if(i == null) {
				for(var a = this.DataList.length - 1; a >= 0; a--) {
					n = this.DataList[a];
					if(n.IsShow) {
						i = n;
						t = 0;
						o = true;
						r.call(this);
						break
					}
				}
			}
			if(i != null) {
				if(o) {
					window.setTimeout(function() {
						f.call(e, i, t)
					}, 200)
				} else {
					f.call(this, i, t)
				}
			}

			function r() {
				if(this.FirstItem.IsLoad) {
					u.call(this, 0, 200)
				}
			}
		}

		function h(t) {
			var e = this;
			var i = null;
			Common.ArrayForeach(this.DataList, function(t) {
				if(t.IsLoad && e.SelectData != null && t.Index2 > e.SelectData.Index2) {
					i = t;
					return false
				}
			});
			var n = false;
			if(i == null) {
				Common.ArrayForeach(this.DataList, function(o) {
					if(o.IsLoad) {
						i = o;
						t = 0;
						n = true;
						a.call(e);
						return false
					}
				})
			}
			if(i != null) {
				if(n) {
					window.setTimeout(function() {
						f.call(e, i, t)
					}, 200)
				} else {
					f.call(this, i, t)
				}
			}

			function a() {
				if(this.LastItem.IsLoad) {
					var t = Common.ArrayWhereToList(this.DataList, function(t) {
						return t.IsLoad
					});
					var e = t.length;
					if(this.FirstItem.IsLoad) {
						e++
					}
					var i = 0 - e * this.Width;
					u.call(this, i, 200)
				}
			}
		}

		function u(t, e) {
			var i = HtmlTag.GetById("ul_" + this.Id);
			e = e == undefined ? "0ms" : e + "ms";
			n(i, "transform", Common.StringFormat("translate({0}px,0px) translateZ(0)", [t]));
			n(i, "transitionTimingFunction", "cubic-bezier(0.1, 0.57, 0.1, 1)");
			n(i, "transitionDuration", e);

			function n(t, e, i) {
				if(t != null && t.style != undefined) {
					t.style[e] = i;
					var n = e.charAt(0).toUpperCase() + e.substr(1);
					var a = ["webkit", "Moz", "ms", "O"];
					for(var o = 0; o < a.length; o++) {
						e = a[o] + n;
						if(e in t.style) {
							t.style[e] = i
						}
					}
				}
			}
		}

		function f(t, e) {
			if(t != undefined) {
				this.SelectData = t
			}
			if(this.SelectData != null) {
				n.call(this, this.SelectData);
				this.ItemChange(t);
				var i = this;
				clearTimeout(this.SetSelectIndexClock);
				this.SetSelectIndexClock = window.setTimeout(function() {
					i.Play()
				}, 200)
			}

			function n(t) {
				var i = Common.ArrayWhereToList(this.DataList, function(e) {
					return e.IsLoad && e.Index2 < t.Index2
				});
				var n = i.length;
				if(this.FirstItem.IsLoad) {
					n++
				}
				var o = 0 - n * this.Width;
				this.SelectData.Left = o;
				u.call(this, o, e);
				if(this.IsSlider && this.Slider.IsNav) {
					a(this.SelectData.Id)
				}
			}

			function a(t) {
				var e = HtmlTag.GetById("nav_" + t);
				if(!!!e) {
					return
				}
				var i = HtmlTag.GetElementsByTagName(e.parentNode, "span");
				if(Common.IsArray(i)) {
					Common.ArrayForeach(i, function(t) {
						HtmlTag.RemoveClass(t, "cui-slide-nav-item-current")
					})
				}
				HtmlTag.AddClass(e, "cui-slide-nav-item-current")
			}
		}

		function g() {
			var t = I.call(this);
			var e = parseInt((this.Width - 20 * t) / 2);
			var i = HtmlTag.GetById("nav_" + this.Id);
			var n = 6;
			if(this.Slider && this.Slider.dotheight && this.Slider.dotheight != 0) {
				n = this.Slider.dotheight
			}
			HtmlTag.SetStyle(i, {
				left: e + "px",
				bottom: n + "px"
			});
			var a = false;
			if(!this.IsSlider) {
				a = t > 1
			}
			if(a) {
				this.IsSlider = true;
				this.Play();
				this.Slider.IsNav && HtmlTag.SetShow(i)
			}
		}

		function I() {
			var t = Common.ArrayWhereToList(this.DataList, function(t) {
				return t.IsLoad
			});
			return t.length
		}

		function S() {
			var t = this;
			this.AdLoadErrorCount = 0;
			Common.ArrayForeach(this.DataList, function(e, i) {
				if(i - 1 >= 0) {
					e.BeforeImage = t.DataList[i - 1]
				}
				if(i + 1 < t.DataList.length) {
					e.AfterImage = t.DataList[i + 1]
				}
			});
			Common.ArrayForeach(this.DataList, function(e, i) {
				t.LoadImage(e)
			})
		}
	}

	function AdDataAccess(t) {
		this.Slider = t;
		this.GetMonitoring = function(t, e, i) {
			var n = this;
			if(!e || e.length <= 0) {
				return
			}
			var a = OutInterface.GetHead();
			var o = {};
			o.ADPositions = e;
			o.PageID = t.PageId;
			var r = OutInterface.GetRootUrl() + "GetMonitoring";
			DataAccess.PostRequest(r, o, function(t) {
				s()
			}, function() {
				s()
			});

			function s() {
				i.call(t)
			}
		};
		this.GetAdDataList = function(t, o) {
			var r = this;
			var s = OutInterface.GetHead();
			var l = {};
			l.DeviceInfo = i(r);
			l.SystemCode = parseFloat(s.syscode);
			l.ChannelID = s.sid;
			l.SiteID = this.Slider.SiteID;
			l.SiteType = this.Slider.SiteType;
			l.GlobalBusinessInfoList = [n.call(this)];
			l.head = s;
			l.Extensions = [];
			l.Extensions.push(a.call(this, "AllianceID", this.Slider.AllianceID));
			l.Extensions.push(a.call(this, "SID", this.Slider.SID));
			l.Extensions.push(a.call(this, "OUID", this.Slider.OUID));
			var d = Common.GetStorage("SelectCityId");
			var m = Common.GetStorage("SelectCityLongitude");
			var c = Common.GetStorage("SelectCityLatitude");
			if(Number(d) > 0) {
				l.AdLocation = {
					CityID: d,
					Longitude: m,
					Latitude: c
				}
			} else {
				l.AdLocation = {
					CityID: 1
				}
			}
			if(Common.StringIsNullOrEmpty(l.SystemCode)) {
				return
			}
			var h = (new Date).getTime();
			this.AdEndTime = 0;
			var u = OutInterface.GetRootUrl() + "GetGlobalADListV4";
			DataAccess.PostRequest(u, l, function(t) {
				f(t, 0, r.Slider.CacheKey)
			}, function() {
				f(null, 0, r.Slider.CacheKey)
			});

			function f(i, n, a) {
				Common.SetStorage("SiteType" + a, "");
				Common.SetStorage("SiteID" + a, "");
				Common.SetStorage("BidAdCount" + a, 0);
				Common.SetStorage("DyAdIndex" + a, 0);
				if(i && i.Extensions && i.Extensions.length > 0) {
					for(var s = 0; s < i.Extensions.length; s++) {
						var l = i.Extensions[s];
						if(l.Name === "AdSite") {
							Common.SetStorage("SiteType" + a, l.Key);
							Common.SetStorage("SiteID" + a, l.Value)
						} else if(l.Name === "BidAdCount") {
							Common.SetStorage("BidAdCount" + a, l.Value)
						} else if(l.Name === "DyAdIndex") {
							Common.SetStorage("DyAdIndex" + a, l.Value)
						}
					}
				}
				var d = Common.GetStorage("SiteID" + r.Slider.CacheKey);
				var m = Common.GetStorage("SiteType" + r.Slider.CacheKey);
				OutInterface.TrackMetric(h, r.Slider.PageId, 2, n, d, m);
				if(i != null && i.Ads != undefined && i.Ads.length > 0) {
					o.call(t, i.Ads)
				} else {
					!r.Slider.IsBackupLoadComplete && r.Slider.AdLoadComplete(r.Slider, 1)
				}
				r.AdEndTime = (new Date).getTime();
				e.call(r)
			}
		};
		this.GetDyAdData = function(t, n, a) {
			var o = this;
			var r = OutInterface.GetHead();
			var s = i(o);
			var l = {};
			var d = Common.GetStorage("SelectCityId");
			if(parseFloat(d) > 0) {
				l.LocationType = {
					CityID: d
				}
			} else {
				l.LocationType = {
					CityID: 1
				}
			}
			l.ScreenWidth = s.ScreenWidth;
			l.ScreenHeight = s.ScreenHeight;
			l.BusinessInfo = {
				BusinessType: this.Slider.BizType,
				PageCode: this.Slider.PageCode
			};
			l.VID = OutInterface.IsHybrid() ? OutInterface.GetClientId() : OutInterface.GetVId();
			l.head = r;
			if(Common.StringIsNullOrEmpty(r.syscode)) {
				return
			}
			var m = (new Date).getTime();
			this.DyAdEndTime = 0;
			var c = OutInterface.GetRootUrl() + "GetDynamicAd";
			DataAccess.PostRequest(c, l, function(t) {
				h(t, 0)
			}, function() {
				h(null, 0)
			});

			function h(i, n) {
				var r = Common.GetStorage("SiteID" + o.Slider.CacheKey);
				var s = Common.GetStorage("SiteType" + o.Slider.CacheKey);
				OutInterface.TrackMetric(m, o.Slider.PageId, 3, n, r, s);
				a.call(t, i);
				o.DyAdEndTime = (new Date).getTime();
				e.call(o)
			}
		};

		function e() {
			if(this.AdEndTime > 0 && this.DyAdEndTime > 0) {
				var t = Common.GetStorage("SiteID" + this.Slider.CacheKey);
				var e = Common.GetStorage("SiteType" + this.Slider.CacheKey);
				OutInterface.TrackMetric(this.Slider.StartTime, this.Slider.PageId, 1, 0, t, e)
			}
		}

		function i(t) {
			var e = t;
			var i = {};
			var n = HtmlTag.GetById(e.Slider.TagId);
			var a = OutInterface.GetCINFO();
			if(!Common.IsEmptyObject(a)) {
				i.ScreenWidth = a.screenWidth;
				i.ScreenHeight = a.screenHeight;
				i.ScreenPxDensity = a.screenPxDensity;
				i.DeviceOSVersion = a.serverVersion
			} else {
				i.ScreenWidth = HtmlTag.GetScreenWidth();
				i.ScreenHeight = HtmlTag.GetScreenHeight()
			}
			if(n.clientWidth > 0) {
				i.ScreenWidth = n.clientWidth * (window.devicePixelRatio || 1)
			}
			if(n.clientHeight > 0) {
				i.ScreenHeight = n.clientHeight * (window.devicePixelRatio || 1)
			}
			return i
		}

		function n() {
			var t = {};
			t.BizType = this.Slider.BizType;
			t.PageCode = this.Slider.PageCode;
			return t
		}

		function a(t, e) {
			var i = {};
			i.Name = t;
			i.Value = e;
			return i
		}
	}

	function AdBusiness(t) {
		this.Slider = t;
		this.TagObject = Object();
		this.AdDataList = Array();
		this.DyAdData = null;
		this.DataAccess = null;
		var e = this.Slider.TagId;
		this.Init = function() {
			var t = this;
			this.DataAccess = new AdDataAccess(this.Slider);
			this.TagObject = HtmlTag.GetById(this.Slider.TagId);
			if(this.TagObject) {
				HtmlTag.AddClass(this.TagObject, "mkt-ad-ccc")
			}
			i.call(this);
			l.call(this);
			if(this.DyAdData == null) {
				OutInterface.GetCity(a, this)
			}
			this.Slider.V4StartT = (new Date).getTime();
			if(this.AdDataList.length == 0) {
				OutInterface.GetLongLatItude(function() {
					t.DataAccess.GetAdDataList(t, function(e) {
						t.Slider.V4EndT = (new Date).getTime();
						t.AdDataList = e;
						n.call(t, false);
						r.call(t)
					})
				})
			} else {
				this.Slider.V4EndT = this.Slider.V4StartT;
				r.call(this)
			}
		};
		this.GetMonitoring = function(t, e) {
			this.DataAccess.GetMonitoring(this.Slider, t, e)
		};

		function i() {
			var t = "AdDataList_" + this.Slider.CacheKey;
			var e = Common.JsonToObject(Common.GetStorage(t));
			if(!Common.IsEmptyObject(e)) {
				this.AdDataList = Common.Clone(e)
			}
		}

		function n(t) {
			var e = "";
			if(t) {} else {
				e = "AdDataList_" + this.Slider.CacheKey;
				Common.SetStorage(e, Common.JsonToString(this.AdDataList), 1)
			}
		}

		function a(t, e, i) {
			if(this.Slider.TemplateVal && this.Slider.TemplateType == "Interstitial") {
				return
			}
			if(i != -1) {
				var n = Common.GetStorage("SiteID" + this.Slider.CacheKey);
				var a = Common.GetStorage("SiteType" + this.Slider.CacheKey);
				OutInterface.TrackMetric(e, this.Slider.PageId, 4, i, n, a)
			}
			this.Slider.DyStartT = (new Date).getTime();
			this.DataAccess.GetDyAdData(this, t, function(t) {
				this.Slider.DyEndT = (new Date).getTime();
				s.call(this, t)
			})
		}

		function o(t) {
			if(t && t.length) {
				return t[0].ADContentList
			}
			return null
		}

		function r() {
			var t = this;
			t.Slider.IsLoadAdComplate = true;
			var i = [];
			t.Slider.AdDataList = [];
			if(this.AdDataList.length > 0) {
				i = this.AdDataList[0].ADContentList;
				i = i.sort(function(t, e) {
					return t.Index > e.Index ? 1 : -1
				})
			}
			var n = [];
			Common.ArrayForeach(i, function(e, i) {
				e.AdvertisementPosition = e.PlaceID;
				e.AID = e.ADID;
				e.IsVisible = false;
				if(!t.Slider.IsHybrid) {
					e.SrcUrl = Common.ReplaceHttp(e.SrcUrl)
				}
				if((!OutInterface.JudgeAndroid612Ctrip || !OutInterface.JudgeAndroid612Ctrip(e.LinkUrl)) && e.Adtype < 100) {
					n.push(e)
				} else {
					t.Slider.AdDataList.push(e)
				}
			});
			if(this.DyAdData != null && (!OutInterface.JudgeAndroid612Ctrip || !OutInterface.JudgeAndroid612Ctrip(this.DyAdData.LinkUrl))) {
				this.DyAdData.IsVisible = false;
				this.Slider.AddDyAdData(n, this.DyAdData, i)
			}
			if(this.Slider.TemplateVal && this.Slider.TemplateType == "Interstitial") {
				if(Common.isInApp(window.navigator.userAgent.toLowerCase())) {
					Common.LoadJS("https://webresource.c-ctrip.com/ResMarketOnline/R2/js/Template/template" + this.Slider.TemplateVal + ".js", function() {
						window.__MKT_Ad_Template && window.__MKT_Ad_Template({
							tagid: e,
							pageid: t.Slider.PageId,
							data: t.AdDataList[0] || []
						})
					});
					this.Slider.BandData(n, i)
				}
			} else {
				this.Slider.BandData(n, i)
			}
		}

		function s(t) {
			this.Slider.IsLoadDyAdComplate = true;
			if(!t) {
				this.Slider.DyAdBandData(null);
				return
			}
			var e = {};
			e.Style = t.Style;
			e.PlaceID = t.PlaceID > 0 ? t.PlaceID - 0 : 0;
			e.Content = t.Content;
			e.AID = t.AID;
			e.ADID = t.AID > 0 ? t.AID - 0 : 0;
			e.Adtype = 0;
			e.SrcUrl = t.Src;
			e.LinkUrl = t.Link;
			e.IsDy = true;
			e.Width = t.Width;
			e.Height = t.Height;
			var i = Common.GetStorage("DyAdIndex" + this.Slider.CacheKey);
			if(i > 0) {
				e.Index = i
			} else {
				e.Index = t.Index
			}
			if(!this.Slider.IsHybrid) {
				e.SrcUrl = Common.ReplaceHttp(e.SrcUrl)
			}
			if(t.Extension && t.Extension.length > 0) {
				Common.ArrayForeach(t.Extension, function(t) {
					e[t.Name] = t.Value
				})
			}
			e.AdvertisementPosition = t.PlaceID;
			this.DyAdData = e;
			n.call(this, true);
			if(!OutInterface.JudgeAndroid612Ctrip || !OutInterface.JudgeAndroid612Ctrip(e.LinkUrl)) {
				this.Slider.DyAdBandData(this.DyAdData)
			}
		}

		function l() {
			var t = this;
			HtmlTag.SetHtml(this.TagObject, "");
			this.Slider.IsNoAdHide && HtmlTag.SetHide(this.TagObject);
			if(!Common.StringIsNullOrEmpty(this.Slider.BackupImageUrl) && !this.Slider.IsLoadComplete) {
				this.Slider.BackupImageId = Common.CreateGuid();
				if(!this.Slider.IsHybrid) {
					this.Slider.BackupImageUrl = Common.ReplaceHttp(this.Slider.BackupImageUrl)
				}
				var e = new Image;
				e.src = this.Slider.BackupImageUrl;
				e.onload = function() {
					if(!t.Slider.IsLoadComplete) {
						var e = Common.StringFormat('<img src="{0}" id="{1}" style="width:100%;"/>', [t.Slider.BackupImageUrl, t.Slider.BackupImageId]);
						HtmlTag.AppendHtml(t.TagObject, e);
						HtmlTag.SetShow(t.TagObject);
						t.Slider.IsBackupLoadComplete = true;
						t.Slider.AdLoadComplete(t.Slider, 0)
					}
				}
			}
		}
	}

	function AdSlider() {
		this.BizType = Number();
		this.PageCode = Number();
		this.TagId = String();
		this.BackupImageUrl = String();
		this.IsNoAdHide = false;
		this.IsNav = true;
		this.ExpandSetTrackLog = function(t, e) {};
		this.AdLoadComplete = function(t, e) {};
		this.IsLoadComplete = false;
		this.IsBackupLoadComplete = false;
		this.hpageid = "";
		this.pageid = "";
		this.Theme = "";
		this.PageId = "";
		this.SiteID = "";
		this.SiteType = "";
		this.dotheight = 0;
		this.AllianceID = "";
		this.SID = "";
		this.OUID = "";
		this.SliderControl = null;
		this.TemplateVal = "";
		this.TemplateType = "";
		this.LonAndLat = {
			IsEnable: true,
			CityID: "",
			Lon: "",
			Lat: ""
		};
		this.SetAdSumPv = Function();
		this.SetLoadTiming = function() {
			if(this.IsLoadAdComplate && this.IsLoadDyAdComplate) {
				var t = this.V4EndT - this.V4StartT;
				var e = this.DyEndT - this.DyStartT;
				var i = [];
				var n = true;
				for(var a = 0; a < this.SliderControl.DataList.length; a++) {
					var o = this.SliderControl.DataList[a];
					n = n && o.IsRequest;
					if(!o.IsRequest) {
						return
					}
					var r = {
						PlaceID: o.PlaceID,
						AdID: o.ADID,
						AdType: o.Adtype,
						ImgLoadTime: o.LoadImgEndT - o.LoadImgStartT
					};
					i.push(r)
				}
				if(n) {
					this.IsLoadAdComplate = false;
					this.IsLoadDyAdComplate = false;
					var s = [];
					var l = {
						AdList: i,
						SvrLoadTime: t,
						DySvrLoadTime: e
					};
					s.push(l);
					this.AdBusiness.GetMonitoring(s, function() {
						var t = "发送监控数据请求完成!"
					})
				}
			}
		};
		/*this.Load = function(t) {
			try {
				this.IsHybrid = OutInterface.IsHybrid();
				if(!Common.IsObject(t)) {
					return
				}
				for(var e in t) {
					this[e] = t[e]
				}
				if(Common.StringIsNullOrEmpty(this.TagId)) {
					return
				}
				if(Common.StringIsNullOrEmpty(this.PageId)) {
					this.PageId = this.IsHybrid ? this.hpageid : this.pageid
				}
				globalLonAndLat = this.LonAndLat;
				this.StartTime = (new Date).getTime();
				this.CacheKey = this.BizType + "_" + this.PageCode + "_" + this.SiteID;
				var i = Common.JsonToObject(Common.GetStorage("UNION"));
				if(this.AllianceID == "" && this.SID == "" && this.OUID == "") {
					if(!Common.IsEmptyObject(i)) {
						var n = Common.Clone(i);
						if(!!n.data) {
							this.AllianceID = n.data.AllianceID ? n.data.AllianceID : "";
							this.SID = n.data.SID ? n.data.SID : "";
							this.OUID = n.data.OUID ? n.data.OUID : ""
						} else if(!!n.value) {
							this.AllianceID = n.value.AllianceID ? n.value.AllianceID : "";
							this.SID = n.value.SID ? n.value.SID : "";
							this.OUID = n.value.OUID ? n.value.OUID : ""
						}
					}
				}
				var a = "";
				if(this.IsHybrid) {
					a = "../advertisement/css/abase.css"
				} else {
					a = "//webresource.c-ctrip.com/ResMarketOnline/R2/css/aFrame/abase.css"
				}
				a = Common.ReplaceHttp(a);
				Common.LoadLink(a);
				o.call(this);
				this.AdBusiness = new AdBusiness(this);
				this.AdBusiness.Init();

				function o() {
					if(Common.StringIsNullOrEmpty(this.Theme) && this.IsHybrid && parseInt(this.BizType) == 3) {
						this.Theme = "hotel"
					}
					if(!Common.StringIsNullOrEmpty(this.Theme)) {
						if(this.Theme.toLowerCase() == "hotel") {
							HtmlTag.AddClass(HtmlTag.GetById(this.TagId), "hotel");
							if(this.IsHybrid) {
								a = "../advertisement/css/hotel-theme.css"
							} else {
								a = "//webresource.c-ctrip.com/ResMarketOnline/R2/css/aFrame/hotel-theme.css"
							}
							Common.LoadLink(a)
						}
					}
				}
			} catch(r) {}
			return this
		};*/
		this.BandData = function(t, e) {
			var i = this;
			this.SliderControl = new SliderControl(this);
			this.SliderControl.ItemChange = function(t) {
				if(t != undefined && !t.IsVisible) {
					t.IsVisible = true;
					n.call(i, 2, t)
				}
			};
			this.SliderControl.ItemClick = function(t) {
				t && n.call(i, 3, t)
			};
			this.SliderControl.FirstImgShow = function(t) {
				t && n.call(i, 4, t)
			};
			this.SliderControl.DyAdImgLoad = function(t) {
				t && n.call(i, 5, t)
			};
			this.SetAdSumPv = function(t) {
				t && n.call(this, 1, t)
			};
			if(this.TemplateVal && this.TemplateType == "Interstitial" && t.length > 0) {
				this.SetAdSumPv(o(t));
				a.call(i, 2, t[0]);
				return
			}
			this.SetAdSumPv(o(t));
			this.SetAdSumPv(r(t));
			l(t);
			this.SetAdSumPv(s(t));
			this.SliderControl.Load(t, e);

			function n(t, e) {
				a.call(this, t, e);
				this.ExpandSetTrackLog(t, e);
				if(t == 3) {
					if(this.IsHybrid) {
						var i = this;
						window.setTimeout(function() {
							i.SliderControl.Play();
							OutInterface.JumpUrl(e.LinkUrl)
						}, 200)
					} else {
						this.SliderControl.ReLoad();
						window.setTimeout(function() {
							OutInterface.JumpUrl(e.LinkUrl)
						}, 200)
					}
				}
			}

			function a(t, e) {
				var i = this.IsHybrid ? OutInterface.GetClientId() : OutInterface.GetVId();
				if(Common.StringIsNullOrEmpty(this.PageId)) {
					return
				}
				var n;
				if(this.IsHybrid) {
					n = {
						UserId: i,
						PageId: this.PageId,
						cver: OutInterface.GetAppVersion()
					};
					if(t == 1) {
						n.PositionIdVSAdId = e.AdvertisementPosition;
						if(e.IsDy) {
							n.PositionIdVSAdId += ":" + e.AID
						}
					} else if(t == 4) {
						n.SvrLoadTime += this.V4EndT - this.V4StartT;
						n.FirstImgShowTime += this.FirstImgShowT - this.V4EndT;
						n.FirstImgShowTimeTotal += this.FirstImgShowT - this.StartTime
					} else if(t == 5) {
						n.DySvrLoadTime += this.DyEndT - this.DyStartT;
						n.DyImgLoadTime += this.DyImgLoadT - this.DyEndT;
						n.DyImgLoadTimeTotal += this.DyImgLoadT - this.StartTime
					} else {
						n.PositionId = e.AdvertisementPosition;
						n.AdId = e.AID;
						n.src = e.SrcUrl
					}
				} else {
					n = "UserId=" + i + "&PageId=" + this.PageId;
					if(t == 1) {
						n += "&PositionIdVSAdId=" + e.AdvertisementPosition;
						if(e.IsDy) {
							n += ":" + e.AID
						}
					} else if(t == 4) {
						n += "&SvrLoadTime=" + (this.V4EndT - this.V4StartT) + "&FirstImgShowTime=" + (this.FirstImgShowT - this.V4EndT) + "&FirstImgShowTimeTotal=" + (this.FirstImgShowT - this.StartTime)
					} else if(t == 5) {
						n += "&DySvrLoadTime=" + (this.DyEndT - this.DyStartT) + "&DyImgLoadTime=" + (this.DyImgLoadT - this.DyEndT) + "&DyImgLoadTimeTotal=" + (this.DyImgLoadT - this.StartTime)
					} else {
						n += "&PositionId=" + e.AdvertisementPosition + "&AdId=" + e.AID + "&src=" + e.SrcUrl
					}
				}
				if(e.IsDy) {
					var a = Common.StringIsNullOrEmpty(e.MKTID) ? "" : e.MKTID;
					if(this.IsHybrid) {
						n.uid = a;
						n.vid = i;
						if(!Common.StringIsNullOrEmpty(e.BITraceLog)) {
							var o = Common.GetPageQueryString(e.BITraceLog);
							for(var r in o) {
								n[r] = o[r]
							}
						}
					} else {
						n += "&uid=" + a;
						n += "&vid=" + i;
						if(!Common.StringIsNullOrEmpty(e.BITraceLog)) {
							n += "&" + e.BITraceLog
						}
					}
				}
				var s = Common.GetStorage("SiteType" + this.CacheKey) || "";
				var l = Common.GetStorage("SiteID" + this.CacheKey) || "";
				if(typeof n === "object") {
					n.SiteType = s;
					n.SiteID = l
				} else if(typeof n === "string") {
					n += "&SiteType=" + s;
					n += "&SiteID=" + l
				}
				OutInterface.SetUBTTrackLog(t, n);
				if(this.IsHybrid && parseInt(this.BizType) == 0 && t == 3) {
					OutInterface.SetUBTActionLog("c_advertise")
				}
			}

			function o(t) {
				var e = [];
				Common.ArrayForeach(t, function(t) {
					if(!t.IsDy && t.AdvertisementPosition && t.AID) {
						if(t.Adtype < 100) {
							e.push(t.AdvertisementPosition + ":" + t.AID)
						}
					}
				});
				return e.length > 0 ? {
					AdvertisementPosition: e.join("-")
				} : null
			}

			function r(t) {
				var e = [];
				Common.ArrayForeach(t, function(t) {
					if(!t.IsDy && t.AdvertisementPosition && t.AID) {
						if(t.Adtype >= 100) {
							e.push(t.AdvertisementPosition + ":" + t.AID)
						}
					}
				});
				return e.length > 0 ? {
					AdvertisementPosition: e.join("-")
				} : null
			}

			function s(t) {
				var e = null;
				Common.ArrayForeach(t, function(t) {
					if(t.IsDy && t.AdvertisementPosition && t.AID) {
						e = t;
						return false
					}
				});
				return e
			}

			function l(t) {
				Common.ArrayForeach(t, function(t) {
					if(!Common.StringIsNullOrEmpty(t.ThirdLoadTrackUrl)) {
						var e = new Image;
						e.src = Common.AddUrlRandom(t.ThirdLoadTrackUrl)
					}
				})
			}
		};
		this.DyAdBandData = function(t) {
			if(this.SliderControl != null && this.SliderControl.DataList) {
				var e = this.AddDyAdData(this.SliderControl.DataList, t, this.SliderControl.FullDataList);
				if(e) {
					if(t && t.AID > 0) {
						this.SetAdSumPv(t)
					}
					this.SliderControl.ReLoad()
				} else {
					this.SliderControl.Slider.SetLoadTiming()
				}
			}
		};
		this.AddDyAdData = function(t, e, i) {
			var n = 0;
			var a = null;
			var o = Common.GetStorage("DyAdIndex" + this.CacheKey);
			var r = Common.GetStorage("BidAdCount" + this.CacheKey);
			var s = o;
			var l = e && e.AID > 0;
			if(l && (s > 0 || t.length == 0)) {
				a = e
			}
			var d = r - (s <= 0 || (e == null || !(e.AID > 0)) ? 0 : 1) - t.length;
			if(l) {
				var m = false;
				if(d >= 0 && s > 0) {
					for(var n = 0; n < t.length; n++) {
						var c = t[n];
						if(s <= c.Index) {
							t.splice(n, 0, e);
							m = true;
							break
						}
					}
				}
				if(!m) {
					t.push(e)
				}
				if(i && i.length) {
					for(var n = 0; n < i.length; n++) {
						if(i[n].Index == e.Index) {
							e.AdvertisementPosition = i[n].AdvertisementPosition;
							break
						}
					}
				}
			}
			if(d > 0 && this.AdDataList && this.AdDataList.length > 0) {
				var h = [];
				var u = [];
				for(var f = 0; f < d && f < this.AdDataList.length; f++) {
					for(var g = 0; g < r; g++) {
						if(!a || a.Index > this.AdDataList[f].Index) {
							a = this.AdDataList[f]
						}
						if(!t[g]) {
							t.push(this.AdDataList[f]);
							u.push(this.AdDataList[f].AdvertisementPosition + ":" + this.AdDataList[f].AID);
							break
						} else if(t[g].Index > g + 1) {
							t.splice(g, 0, this.AdDataList[f]);
							u.push(this.AdDataList[f].AdvertisementPosition + ":" + this.AdDataList[f].AID);
							break
						}
					}
				}
				this.SetAdSumPv(u.length > 0 ? {
					AdvertisementPosition: u.join("-")
				} : null)
			}
			return a
		};
		this.destroy = function() {
			this.SliderControl.Destroy();
			this.SliderControl = null
		}
	}

	function AdInit() {
		Common.ClearAdCache()
	}
	AdInit();
	var version = "201805232131";
	window.AdSlider = AdSlider
})();